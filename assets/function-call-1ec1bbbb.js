import{A as B,u as v,N as I,J as T,e as c,D as O,s as M,L as N,y as L,O as z}from"./vue-libs-9b0981d5.js";import{c as j,p as A,g as y,n as C,S as E,d as w,I as U,B as D,e as k,i as V,M as q}from"./index-137ae4a8.js";import{a as H}from"./use-touch-7ef5a55b.js";import{P as J}from"./index-9fc963e1.js";import{L as _}from"./index-c9c363c8.js";let f=0;function F(e){e?(f||document.body.classList.add("van-toast--unclickable"),f++):f&&(f--,f||document.body.classList.remove("van-toast--unclickable"))}const[G,r]=j("toast"),K=["show","overlay","teleport","transition","overlayClass","overlayStyle","closeOnClickOverlay"],Q={icon:String,show:Boolean,type:y("text"),overlay:Boolean,message:C,iconSize:C,duration:E(2e3),position:y("middle"),teleport:[String,Object],wordBreak:String,className:w,iconPrefix:String,transition:y("van-fade"),loadingType:String,forbidClick:Boolean,overlayClass:w,overlayStyle:Object,closeOnClick:Boolean,closeOnClickOverlay:Boolean};var R=B({name:G,props:Q,emits:["update:show"],setup(e,{emit:t,slots:n}){let l,o=!1;const u=()=>{const s=e.show&&e.forbidClick;o!==s&&(o=s,F(o))},d=s=>t("update:show",s),g=()=>{e.closeOnClick&&d(!1)},m=()=>clearTimeout(l),p=()=>{const{icon:s,type:a,iconSize:h,iconPrefix:P,loadingType:x}=e;if(s||a==="success"||a==="fail")return c(U,{name:s||a,size:h,class:r("icon"),classPrefix:P},null);if(a==="loading")return c(_,{class:r("loading"),size:h,type:x},null)},S=()=>{const{type:s,message:a}=e;if(n.message)return c("div",{class:r("text")},[n.message()]);if(D(a)&&a!=="")return s==="html"?c("div",{key:0,class:r("text"),innerHTML:String(a)},null):c("div",{class:r("text")},[a])};return v(()=>[e.show,e.forbidClick],u),v(()=>[e.show,e.type,e.message,e.duration],()=>{m(),e.show&&e.duration>0&&(l=setTimeout(()=>{d(!1)},e.duration))}),I(u),T(u),()=>c(J,O({class:[r([e.position,e.wordBreak==="normal"?"break-normal":e.wordBreak,{[e.type]:!e.icon}]),e.className],lockScroll:!1,onClick:g,onClosed:m,"onUpdate:show":d},A(e,K)),{default:()=>[p(),S()]})}});function W(){const e=N({show:!1}),t=o=>{e.show=o},n=o=>{k(e,o,{transitionAppear:!0}),t(!0)},l=()=>t(!1);return H({open:n,close:l,toggle:t}),{open:n,close:l,state:e,toggle:t}}function X(e){const t=M(e),n=document.createElement("div");return document.body.appendChild(n),{instance:t.mount(n),unmount(){t.unmount(),document.body.removeChild(n)}}}const Y={icon:"",type:"text",message:"",className:"",overlay:!1,onClose:void 0,onOpened:void 0,duration:2e3,teleport:"body",iconSize:void 0,iconPrefix:void 0,position:"middle",transition:"van-fade",forbidClick:!1,loadingType:void 0,overlayClass:"",overlayStyle:void 0,closeOnClick:!1,closeOnClickOverlay:!1};let i=[],Z=!1,b=k({},Y);const $=new Map;function ee(e){return q(e)?e:{message:e}}function te(){const{instance:e,unmount:t}=X({setup(){const n=L(""),{open:l,state:o,close:u,toggle:d}=W(),g=()=>{},m=()=>c(R,O(o,{onClosed:g,"onUpdate:show":d}),null);return v(n,p=>{o.message=p}),z().render=m,{open:l,close:u,message:n}}});return e}function ne(){if(!i.length||Z){const e=te();i.push(e)}return i[i.length-1]}function re(e={}){if(!V)return{};const t=ne(),n=ee(e);return t.open(k({},b,$.get(n.type||b.type),n)),t}const ue=e=>{i.length&&(e?(i.forEach(t=>{t.close()}),i=[]):i[0].close())};export{R as a,ue as c,X as m,re as s,W as u};
