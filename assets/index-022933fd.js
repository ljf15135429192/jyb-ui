import{_ as M}from"./index-2ac19e6b.js";import{u as H}from"./useFontScale-afa8cc55.js";import{a as z,F as J}from"./index-b73281c4.js";import{u as Z}from"./use-id-7f4b502d.js";import{a as q}from"./use-touch-7ef5a55b.js";import{c as L,n as G,t as w,l as Q,I as W,w as P,e as N,g as R,p as A,z as X}from"./index-137ae4a8.js";import{A as y,y as x,e as a,D as V,C as D,g as F,r as E,o as Y,a as ee,w as g,B as _}from"./vue-libs-9b0981d5.js";import{u as te}from"./use-placeholder-6fd570b8.js";import{H as p,f as ae}from"./use-route-8dafc2dc.js";import{s as le}from"./function-call-1ec1bbbb.js";import"./index-1d7fc5ab.js";import"./index-0362a036.js";import"./index-52403669.js";import"./index-9fc963e1.js";import"./index-c9c363c8.js";const[ne,u]=L("nav-bar"),ce={title:String,fixed:Boolean,zIndex:G,border:w,leftText:String,rightText:String,leftDisabled:Boolean,rightDisabled:Boolean,leftArrow:Boolean,placeholder:Boolean,safeAreaInsetTop:Boolean,clickable:w};var oe=y({name:ne,props:ce,emits:["clickLeft","clickRight"],setup(e,{emit:n,slots:l}){const r=x(),d=te(r,u),o=s=>{e.leftDisabled||n("clickLeft",s)},f=s=>{e.rightDisabled||n("clickRight",s)},c=()=>l.left?l.left():[e.leftArrow&&a(W,{class:u("arrow"),name:"arrow-left"},null),e.leftText&&a("span",{class:u("text")},[e.leftText])],h=()=>l.right?l.right():a("span",{class:u("text")},[e.rightText]),m=()=>{const{title:s,fixed:i,border:k,zIndex:b}=e,B=Q(b),I=e.leftArrow||e.leftText||l.left,S=e.rightText||l.right;return a("div",{ref:r,style:B,class:[u({fixed:i}),{[ae]:k,"van-safe-area-top":e.safeAreaInsetTop}]},[a("div",{class:u("content")},[I&&a("div",{class:[u("left",{disabled:e.leftDisabled}),e.clickable&&!e.leftDisabled?p:""],onClick:o},[c()]),a("div",{class:[u("title"),"van-ellipsis"]},[l.title?l.title():s]),S&&a("div",{class:[u("right",{disabled:e.rightDisabled}),e.clickable&&!e.rightDisabled?p:""],onClick:f},[h()])])])};return()=>e.fixed&&e.placeholder?d(m):m()}});const ie=P(oe),[re,v,se]=L("search"),ue=N({},z,{label:String,shape:R("square"),leftIcon:R("search"),clearable:w,actionText:String,background:String,showAction:Boolean});var de=y({name:re,props:ue,emits:["blur","focus","clear","search","cancel","clickInput","clickLeftIcon","clickRightIcon","update:modelValue"],setup(e,{emit:n,slots:l,attrs:r}){const d=Z(),o=x(),f=()=>{l.action||(n("update:modelValue",""),n("cancel"))},c=t=>{t.keyCode===13&&(X(t),n("search",e.modelValue))},h=()=>e.id||`${d}-input`,m=()=>{if(l.label||e.label)return a("label",{class:v("label"),for:h()},[l.label?l.label():e.label])},s=()=>{if(e.showAction){const t=e.actionText||se("cancel");return a("div",{class:v("action"),role:"button",tabindex:0,onClick:f},[l.action?l.action():t])}},i=()=>{var t;return(t=o.value)==null?void 0:t.blur()},k=()=>{var t;return(t=o.value)==null?void 0:t.focus()},b=t=>n("blur",t),B=t=>n("focus",t),I=t=>n("clear",t),S=t=>n("clickInput",t),O=t=>n("clickLeftIcon",t),$=t=>n("clickRightIcon",t),j=Object.keys(z),U=()=>{const t=N({},r,A(e,j),{id:h()}),T=K=>n("update:modelValue",K);return a(J,V({ref:o,type:"search",class:v("field",{"with-message":t.errorMessage}),border:!1,onBlur:b,onFocus:B,onClear:I,onKeypress:c,onClickInput:S,onClickLeftIcon:O,onClickRightIcon:$,"onUpdate:modelValue":T},t),A(l,["left-icon","right-icon"]))};return q({focus:k,blur:i}),()=>{var t;return a("div",{class:v({"show-action":e.showAction}),style:{background:e.background}},[(t=l.left)==null?void 0:t.call(l),a("div",{class:v("content",e.shape)},[m(),U()]),s()])}}});const fe=P(de),C=y({name:"JybNavBar",props:{url:String,title:String,clickBack:Function,isSearch:Boolean,modelValue:String,fixed:{type:Boolean,default:!0}},emits:["search","update:modelValue"],setup(e,{emit:n,attrs:l,slots:r}){const d=x(""),{fontClass:o}=H({name:"jyb-nav-scale"}),f=D(()=>getComputedStyle(document.documentElement).getPropertyValue("--jyb-red")),c=D({get:function(){return e.modelValue||d.value},set:function(i){d.value=i,setTimeout(()=>{n("update:modelValue",i)},0)}});function h(i){const k=new RegExp(/[^\a-\z\A-\Z0-9\u4E00-\u9FA5\.\,\?\<\>\。\，\-\——\=\;\@\！\!\+\$\n]/g),b=i.replace(k,"");c.value=b}function m(){if(e.url){window.location.href=e.url;return}if(e.clickBack){if(!e.clickBack())return""}else window.history.go(-1)}function s(){n("search",c.value)}return()=>a(ie,V(l,{title:e.title,"left-arrow":!0,onClickLeft:m,fixed:e.fixed,placeholder:!0,class:["jyb-nav-bar",o.value]}),{title:()=>e.isSearch?a(fe,V({class:"search",background:f.value,modelValue:c.value,"onUpdate:modelValue":[i=>c.value=i,h]},l),null):e.title,right:()=>e.isSearch?a("span",{class:"text",onClick:s},[F("搜索")]):a("span",{class:"text"},[r.right&&r.right()])})}}),he={class:"nav-box"},Re={__name:"index",setup(e){const n=x("初始值"),l=x("default");function r(o){console.log(o),le("当前搜索值："+JSON.stringify(o))}function d(){return!1}return(o,f)=>{const c=E("demo-block"),h=E("demo-section");return Y(),ee("div",he,[a(h,null,{default:g(()=>[a(M),a(c,{title:"基础用法"},{default:g(()=>[a(_(C),{title:"顶部导航",fixed:!1,"font-size-scale":l.value},null,8,["font-size-scale"])]),_:1}),a(c,{title:"搜索导航"},{default:g(()=>[a(_(C),{title:"搜索导航",modelValue:n.value,"onUpdate:modelValue":f[0]||(f[0]=m=>n.value=m),"is-search":"",onSearch:r,fixed:!1,"font-size-scale":l.value},null,8,["modelValue","font-size-scale"])]),_:1}),a(c,{title:"自定义右侧"},{default:g(()=>[a(_(C),{title:"顶部导航",fixed:!1,"font-size-scale":l.value},{right:g(()=>[F(" 添加 ")]),_:1},8,["font-size-scale"])]),_:1}),a(c,{title:"返回校验"},{default:g(()=>[a(_(C),{title:"顶部导航","click-back":d,fixed:!1,"font-size-scale":l.value},null,8,["font-size-scale"])]),_:1})]),_:1})])}}};export{Re as default};
